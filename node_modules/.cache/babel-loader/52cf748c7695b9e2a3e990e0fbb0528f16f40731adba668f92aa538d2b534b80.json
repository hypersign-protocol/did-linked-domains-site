{"ast":null,"code":"\"use strict\";\n\n/**\n *  ENS is a service which allows easy-to-remember names to map to\n *  network addresses.\n *\n *  @_section: api/providers/ens-resolver:ENS Resolver  [about-ens-rsolver]\n */\nvar _classPrivateMethodInitSpec = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js\").default;\nvar _classPrivateFieldInitSpec = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js\").default;\nvar _classStaticPrivateMethodGet = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classStaticPrivateMethodGet.js\").default;\nvar _classPrivateMethodGet = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classPrivateMethodGet.js\").default;\nvar _classPrivateFieldGet = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classPrivateFieldGet.js\").default;\nvar _classPrivateFieldSet = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/classPrivateFieldSet.js\").default;\nvar _defineProperty = require(\"/home/pratap/domain-linkege/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EnsResolver = exports.BasicMulticoinProviderPlugin = exports.MulticoinProviderPlugin = void 0;\nconst index_js_1 = require(\"../address/index.js\");\nconst index_js_2 = require(\"../constants/index.js\");\nconst index_js_3 = require(\"../contract/index.js\");\nconst index_js_4 = require(\"../hash/index.js\");\nconst index_js_5 = require(\"../utils/index.js\");\n// @TODO: This should use the fetch-data:ipfs gateway\n// Trim off the ipfs:// prefix and return the default gateway URL\nfunction getIpfsLink(link) {\n  if (link.match(/^ipfs:\\/\\/ipfs\\//i)) {\n    link = link.substring(12);\n  } else if (link.match(/^ipfs:\\/\\//i)) {\n    link = link.substring(7);\n  } else {\n    (0, index_js_5.assertArgument)(false, \"unsupported IPFS format\", \"link\", link);\n  }\n  return `https:/\\/gateway.ipfs.io/ipfs/${link}`;\n}\n;\n;\n/**\n *  A provider plugin super-class for processing multicoin address types.\n */\nclass MulticoinProviderPlugin {\n  /**\n   *  Creates a new **MulticoinProviderPluing** for %%name%%.\n   */\n  constructor(name) {\n    /**\n     *  The name.\n     */\n    _defineProperty(this, \"name\", void 0);\n    (0, index_js_5.defineProperties)(this, {\n      name\n    });\n  }\n  connect(proivder) {\n    return this;\n  }\n  /**\n   *  Returns ``true`` if %%coinType%% is supported by this plugin.\n   */\n  supportsCoinType(coinType) {\n    return false;\n  }\n  /**\n   *  Resovles to the encoded %%address%% for %%coinType%%.\n   */\n  async encodeAddress(coinType, address) {\n    throw new Error(\"unsupported coin\");\n  }\n  /**\n   *  Resovles to the decoded %%data%% for %%coinType%%.\n   */\n  async decodeAddress(coinType, data) {\n    throw new Error(\"unsupported coin\");\n  }\n}\nexports.MulticoinProviderPlugin = MulticoinProviderPlugin;\nconst BasicMulticoinPluginId = \"org.ethers.plugins.provider.BasicMulticoin\";\n/**\n *  A **BasicMulticoinProviderPlugin** provides service for common\n *  coin types, which do not require additional libraries to encode or\n *  decode.\n */\nclass BasicMulticoinProviderPlugin extends MulticoinProviderPlugin {\n  /**\n   *  Creates a new **BasicMulticoinProviderPlugin**.\n   */\n  constructor() {\n    super(BasicMulticoinPluginId);\n  }\n}\nexports.BasicMulticoinProviderPlugin = BasicMulticoinProviderPlugin;\nconst matcherIpfs = new RegExp(\"^(ipfs):/\\/(.*)$\", \"i\");\nconst matchers = [new RegExp(\"^(https):/\\/(.*)$\", \"i\"), new RegExp(\"^(data):(.*)$\", \"i\"), matcherIpfs, new RegExp(\"^eip155:[0-9]+/(erc[0-9]+):(.*)$\", \"i\")];\n/**\n *  A connected object to a resolved ENS name resolver, which can be\n *  used to query additional details.\n */\nvar _supports = /*#__PURE__*/new WeakMap();\nvar _resolver = /*#__PURE__*/new WeakMap();\nvar _fetch = /*#__PURE__*/new WeakSet();\nclass EnsResolver {\n  constructor(provider, address, name) {\n    _classPrivateMethodInitSpec(this, _fetch);\n    /**\n     *  The connected provider.\n     */\n    _defineProperty(this, \"provider\", void 0);\n    /**\n     *  The address of the resolver.\n     */\n    _defineProperty(this, \"address\", void 0);\n    /**\n     *  The name this resolver was resolved against.\n     */\n    _defineProperty(this, \"name\", void 0);\n    // For EIP-2544 names, the ancestor that provided the resolver\n    _classPrivateFieldInitSpec(this, _supports, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _resolver, {\n      writable: true,\n      value: void 0\n    });\n    (0, index_js_5.defineProperties)(this, {\n      provider,\n      address,\n      name\n    });\n    _classPrivateFieldSet(this, _supports, null);\n    _classPrivateFieldSet(this, _resolver, new index_js_3.Contract(address, [\"function supportsInterface(bytes4) view returns (bool)\", \"function resolve(bytes, bytes) view returns (bytes)\", \"function addr(bytes32) view returns (address)\", \"function addr(bytes32, uint) view returns (bytes)\", \"function text(bytes32, string) view returns (string)\", \"function contenthash(bytes32) view returns (bytes)\"], provider));\n  }\n  /**\n   *  Resolves to true if the resolver supports wildcard resolution.\n   */\n  async supportsWildcard() {\n    if (_classPrivateFieldGet(this, _supports) == null) {\n      _classPrivateFieldSet(this, _supports, (async () => {\n        try {\n          return await _classPrivateFieldGet(this, _resolver).supportsInterface(\"0x9061b923\");\n        } catch (error) {\n          // Wildcard resolvers must understand supportsInterface\n          // and return true.\n          if ((0, index_js_5.isError)(error, \"CALL_EXCEPTION\")) {\n            return false;\n          }\n          // Let future attempts try again...\n          _classPrivateFieldSet(this, _supports, null);\n          throw error;\n        }\n      })());\n    }\n    return await _classPrivateFieldGet(this, _supports);\n  }\n  /**\n   *  Resolves to the address for %%coinType%% or null if the\n   *  provided %%coinType%% has not been configured.\n   */\n  async getAddress(coinType) {\n    if (coinType == null) {\n      coinType = 60;\n    }\n    if (coinType === 60) {\n      try {\n        const result = await _classPrivateMethodGet(this, _fetch, _fetch2).call(this, \"addr(bytes32)\");\n        // No address\n        if (result == null || result === index_js_2.ZeroAddress) {\n          return null;\n        }\n        return result;\n      } catch (error) {\n        if ((0, index_js_5.isError)(error, \"CALL_EXCEPTION\")) {\n          return null;\n        }\n        throw error;\n      }\n    }\n    // Try decoding its EVM canonical chain as an EVM chain address first\n    if (coinType >= 0 && coinType < 0x80000000) {\n      let ethCoinType = coinType + 0x80000000;\n      const data = await _classPrivateMethodGet(this, _fetch, _fetch2).call(this, \"addr(bytes32,uint)\", [ethCoinType]);\n      if ((0, index_js_5.isHexString)(data, 20)) {\n        return (0, index_js_1.getAddress)(data);\n      }\n    }\n    let coinPlugin = null;\n    for (const plugin of this.provider.plugins) {\n      if (!(plugin instanceof MulticoinProviderPlugin)) {\n        continue;\n      }\n      if (plugin.supportsCoinType(coinType)) {\n        coinPlugin = plugin;\n        break;\n      }\n    }\n    if (coinPlugin == null) {\n      return null;\n    }\n    // keccak256(\"addr(bytes32,uint256\")\n    const data = await _classPrivateMethodGet(this, _fetch, _fetch2).call(this, \"addr(bytes32,uint)\", [coinType]);\n    // No address\n    if (data == null || data === \"0x\") {\n      return null;\n    }\n    // Compute the address\n    const address = await coinPlugin.decodeAddress(coinType, data);\n    if (address != null) {\n      return address;\n    }\n    (0, index_js_5.assert)(false, `invalid coin data`, \"UNSUPPORTED_OPERATION\", {\n      operation: `getAddress(${coinType})`,\n      info: {\n        coinType,\n        data\n      }\n    });\n  }\n  /**\n   *  Resolves to the EIP-634 text record for %%key%%, or ``null``\n   *  if unconfigured.\n   */\n  async getText(key) {\n    const data = await _classPrivateMethodGet(this, _fetch, _fetch2).call(this, \"text(bytes32,string)\", [key]);\n    if (data == null || data === \"0x\") {\n      return null;\n    }\n    return data;\n  }\n  /**\n   *  Rsolves to the content-hash or ``null`` if unconfigured.\n   */\n  async getContentHash() {\n    // keccak256(\"contenthash()\")\n    const data = await _classPrivateMethodGet(this, _fetch, _fetch2).call(this, \"contenthash(bytes32)\");\n    // No contenthash\n    if (data == null || data === \"0x\") {\n      return null;\n    }\n    // IPFS (CID: 1, Type: 70=DAG-PB, 72=libp2p-key)\n    const ipfs = data.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);\n    if (ipfs) {\n      const scheme = ipfs[1] === \"e3010170\" ? \"ipfs\" : \"ipns\";\n      const length = parseInt(ipfs[4], 16);\n      if (ipfs[5].length === length * 2) {\n        return `${scheme}:/\\/${(0, index_js_5.encodeBase58)(\"0x\" + ipfs[2])}`;\n      }\n    }\n    // Swarm (CID: 1, Type: swarm-manifest; hash/length hard-coded to keccak256/32)\n    const swarm = data.match(/^0xe40101fa011b20([0-9a-f]*)$/);\n    if (swarm && swarm[1].length === 64) {\n      return `bzz:/\\/${swarm[1]}`;\n    }\n    (0, index_js_5.assert)(false, `invalid or unsupported content hash data`, \"UNSUPPORTED_OPERATION\", {\n      operation: \"getContentHash()\",\n      info: {\n        data\n      }\n    });\n  }\n  /**\n   *  Resolves to the avatar url or ``null`` if the avatar is either\n   *  unconfigured or incorrectly configured (e.g. references an NFT\n   *  not owned by the address).\n   *\n   *  If diagnosing issues with configurations, the [[_getAvatar]]\n   *  method may be useful.\n   */\n  async getAvatar() {\n    const avatar = await this._getAvatar();\n    return avatar.url;\n  }\n  /**\n   *  When resolving an avatar, there are many steps involved, such\n   *  fetching metadata and possibly validating ownership of an\n   *  NFT.\n   *\n   *  This method can be used to examine each step and the value it\n   *  was working from.\n   */\n  async _getAvatar() {\n    const linkage = [{\n      type: \"name\",\n      value: this.name\n    }];\n    try {\n      // test data for ricmoo.eth\n      //const avatar = \"eip155:1/erc721:0x265385c7f4132228A0d54EB1A9e7460b91c0cC68/29233\";\n      const avatar = await this.getText(\"avatar\");\n      if (avatar == null) {\n        linkage.push({\n          type: \"!avatar\",\n          value: \"\"\n        });\n        return {\n          url: null,\n          linkage\n        };\n      }\n      linkage.push({\n        type: \"avatar\",\n        value: avatar\n      });\n      for (let i = 0; i < matchers.length; i++) {\n        const match = avatar.match(matchers[i]);\n        if (match == null) {\n          continue;\n        }\n        const scheme = match[1].toLowerCase();\n        switch (scheme) {\n          case \"https\":\n          case \"data\":\n            linkage.push({\n              type: \"url\",\n              value: avatar\n            });\n            return {\n              linkage,\n              url: avatar\n            };\n          case \"ipfs\":\n            {\n              const url = getIpfsLink(avatar);\n              linkage.push({\n                type: \"ipfs\",\n                value: avatar\n              });\n              linkage.push({\n                type: \"url\",\n                value: url\n              });\n              return {\n                linkage,\n                url\n              };\n            }\n          case \"erc721\":\n          case \"erc1155\":\n            {\n              // Depending on the ERC type, use tokenURI(uint256) or url(uint256)\n              const selector = scheme === \"erc721\" ? \"tokenURI(uint256)\" : \"uri(uint256)\";\n              linkage.push({\n                type: scheme,\n                value: avatar\n              });\n              // The owner of this name\n              const owner = await this.getAddress();\n              if (owner == null) {\n                linkage.push({\n                  type: \"!owner\",\n                  value: \"\"\n                });\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              const comps = (match[2] || \"\").split(\"/\");\n              if (comps.length !== 2) {\n                linkage.push({\n                  type: `!${scheme}caip`,\n                  value: match[2] || \"\"\n                });\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              const tokenId = comps[1];\n              const contract = new index_js_3.Contract(comps[0], [\n              // ERC-721\n              \"function tokenURI(uint) view returns (string)\", \"function ownerOf(uint) view returns (address)\",\n              // ERC-1155\n              \"function uri(uint) view returns (string)\", \"function balanceOf(address, uint256) view returns (uint)\"], this.provider);\n              // Check that this account owns the token\n              if (scheme === \"erc721\") {\n                const tokenOwner = await contract.ownerOf(tokenId);\n                if (owner !== tokenOwner) {\n                  linkage.push({\n                    type: \"!owner\",\n                    value: tokenOwner\n                  });\n                  return {\n                    url: null,\n                    linkage\n                  };\n                }\n                linkage.push({\n                  type: \"owner\",\n                  value: tokenOwner\n                });\n              } else if (scheme === \"erc1155\") {\n                const balance = await contract.balanceOf(owner, tokenId);\n                if (!balance) {\n                  linkage.push({\n                    type: \"!balance\",\n                    value: \"0\"\n                  });\n                  return {\n                    url: null,\n                    linkage\n                  };\n                }\n                linkage.push({\n                  type: \"balance\",\n                  value: balance.toString()\n                });\n              }\n              // Call the token contract for the metadata URL\n              let metadataUrl = await contract[selector](tokenId);\n              if (metadataUrl == null || metadataUrl === \"0x\") {\n                linkage.push({\n                  type: \"!metadata-url\",\n                  value: \"\"\n                });\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              linkage.push({\n                type: \"metadata-url-base\",\n                value: metadataUrl\n              });\n              // ERC-1155 allows a generic {id} in the URL\n              if (scheme === \"erc1155\") {\n                metadataUrl = metadataUrl.replace(\"{id}\", (0, index_js_5.toBeHex)(tokenId, 32).substring(2));\n                linkage.push({\n                  type: \"metadata-url-expanded\",\n                  value: metadataUrl\n                });\n              }\n              // Transform IPFS metadata links\n              if (metadataUrl.match(/^ipfs:/i)) {\n                metadataUrl = getIpfsLink(metadataUrl);\n              }\n              linkage.push({\n                type: \"metadata-url\",\n                value: metadataUrl\n              });\n              // Get the token metadata\n              let metadata = {};\n              const response = await new index_js_5.FetchRequest(metadataUrl).send();\n              response.assertOk();\n              try {\n                metadata = response.bodyJson;\n              } catch (error) {\n                try {\n                  linkage.push({\n                    type: \"!metadata\",\n                    value: response.bodyText\n                  });\n                } catch (error) {\n                  const bytes = response.body;\n                  if (bytes) {\n                    linkage.push({\n                      type: \"!metadata\",\n                      value: (0, index_js_5.hexlify)(bytes)\n                    });\n                  }\n                  return {\n                    url: null,\n                    linkage\n                  };\n                }\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              if (!metadata) {\n                linkage.push({\n                  type: \"!metadata\",\n                  value: \"\"\n                });\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              linkage.push({\n                type: \"metadata\",\n                value: JSON.stringify(metadata)\n              });\n              // Pull the image URL out\n              let imageUrl = metadata.image;\n              if (typeof imageUrl !== \"string\") {\n                linkage.push({\n                  type: \"!imageUrl\",\n                  value: \"\"\n                });\n                return {\n                  url: null,\n                  linkage\n                };\n              }\n              if (imageUrl.match(/^(https:\\/\\/|data:)/i)) {\n                // Allow\n              } else {\n                // Transform IPFS link to gateway\n                const ipfs = imageUrl.match(matcherIpfs);\n                if (ipfs == null) {\n                  linkage.push({\n                    type: \"!imageUrl-ipfs\",\n                    value: imageUrl\n                  });\n                  return {\n                    url: null,\n                    linkage\n                  };\n                }\n                linkage.push({\n                  type: \"imageUrl-ipfs\",\n                  value: imageUrl\n                });\n                imageUrl = getIpfsLink(imageUrl);\n              }\n              linkage.push({\n                type: \"url\",\n                value: imageUrl\n              });\n              return {\n                linkage,\n                url: imageUrl\n              };\n            }\n        }\n      }\n    } catch (error) {}\n    return {\n      linkage,\n      url: null\n    };\n  }\n  static async getEnsAddress(provider) {\n    const network = await provider.getNetwork();\n    const ensPlugin = network.getPlugin(\"org.ethers.plugins.network.Ens\");\n    // No ENS...\n    (0, index_js_5.assert)(ensPlugin, \"network does not support ENS\", \"UNSUPPORTED_OPERATION\", {\n      operation: \"getEnsAddress\",\n      info: {\n        network\n      }\n    });\n    return ensPlugin.address;\n  }\n  /**\n   *  Resolve to the ENS resolver for %%name%% using %%provider%% or\n   *  ``null`` if unconfigured.\n   */\n  static async fromName(provider, name) {\n    let currentName = name;\n    while (true) {\n      if (currentName === \"\" || currentName === \".\") {\n        return null;\n      }\n      // Optimization since the eth node cannot change and does\n      // not have a wildcard resolver\n      if (name !== \"eth\" && currentName === \"eth\") {\n        return null;\n      }\n      // Check the current node for a resolver\n      const addr = await _classStaticPrivateMethodGet(EnsResolver, EnsResolver, _getResolver).call(EnsResolver, provider, currentName);\n      // Found a resolver!\n      if (addr != null) {\n        const resolver = new EnsResolver(provider, addr, name);\n        // Legacy resolver found, using EIP-2544 so it isn't safe to use\n        if (currentName !== name && !(await resolver.supportsWildcard())) {\n          return null;\n        }\n        return resolver;\n      }\n      // Get the parent node\n      currentName = currentName.split(\".\").slice(1).join(\".\");\n    }\n  }\n}\nasync function _fetch2(funcName, params) {\n  params = (params || []).slice();\n  const iface = _classPrivateFieldGet(this, _resolver).interface;\n  // The first parameters is always the nodehash\n  params.unshift((0, index_js_4.namehash)(this.name));\n  let fragment = null;\n  if (await this.supportsWildcard()) {\n    fragment = iface.getFunction(funcName);\n    (0, index_js_5.assert)(fragment, \"missing fragment\", \"UNKNOWN_ERROR\", {\n      info: {\n        funcName\n      }\n    });\n    params = [(0, index_js_4.dnsEncode)(this.name), iface.encodeFunctionData(fragment, params)];\n    funcName = \"resolve(bytes,bytes)\";\n  }\n  params.push({\n    enableCcipRead: true\n  });\n  try {\n    const result = await _classPrivateFieldGet(this, _resolver)[funcName](...params);\n    if (fragment) {\n      return iface.decodeFunctionResult(fragment, result)[0];\n    }\n    return result;\n  } catch (error) {\n    if (!(0, index_js_5.isError)(error, \"CALL_EXCEPTION\")) {\n      throw error;\n    }\n  }\n  return null;\n}\nasync function _getResolver(provider, name) {\n  const ensAddr = await EnsResolver.getEnsAddress(provider);\n  try {\n    const contract = new index_js_3.Contract(ensAddr, [\"function resolver(bytes32) view returns (address)\"], provider);\n    const addr = await contract.resolver((0, index_js_4.namehash)(name), {\n      enableCcipRead: true\n    });\n    if (addr === index_js_2.ZeroAddress) {\n      return null;\n    }\n    return addr;\n  } catch (error) {\n    // ENS registry cannot throw errors on resolver(bytes32),\n    // so probably a link error\n    throw error;\n  }\n  return null;\n}\nexports.EnsResolver = EnsResolver;","map":{"version":3,"names":["_classPrivateMethodInitSpec","require","default","_classPrivateFieldInitSpec","_classStaticPrivateMethodGet","_classPrivateMethodGet","_classPrivateFieldGet","_classPrivateFieldSet","_defineProperty","index_js_1","index_js_2","index_js_3","index_js_4","index_js_5","getIpfsLink","link","match","substring","assertArgument","MulticoinProviderPlugin","constructor","name","defineProperties","connect","proivder","supportsCoinType","coinType","encodeAddress","address","Error","decodeAddress","data","exports","BasicMulticoinPluginId","BasicMulticoinProviderPlugin","matcherIpfs","RegExp","matchers","_supports","WeakMap","_resolver","_fetch","WeakSet","EnsResolver","provider","writable","value","Contract","supportsWildcard","supportsInterface","error","isError","getAddress","result","_fetch2","call","ZeroAddress","ethCoinType","isHexString","coinPlugin","plugin","plugins","assert","operation","info","getText","key","getContentHash","ipfs","scheme","length","parseInt","encodeBase58","swarm","getAvatar","avatar","_getAvatar","url","linkage","type","push","i","toLowerCase","selector","owner","comps","split","tokenId","contract","tokenOwner","ownerOf","balance","balanceOf","toString","metadataUrl","replace","toBeHex","metadata","response","FetchRequest","send","assertOk","bodyJson","bodyText","bytes","body","hexlify","JSON","stringify","imageUrl","image","getEnsAddress","network","getNetwork","ensPlugin","getPlugin","fromName","currentName","addr","_getResolver","resolver","slice","join","funcName","params","iface","interface","unshift","namehash","fragment","getFunction","dnsEncode","encodeFunctionData","enableCcipRead","decodeFunctionResult","ensAddr"],"sources":["../../src.ts/providers/ens-resolver.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}