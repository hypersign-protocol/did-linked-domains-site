{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultValueProducer = void 0;\n// allows pre-producing values before anyone is listening\nclass DefaultValueProducer {\n  constructor(value, callbacks) {\n    this.callbacks = callbacks;\n    this.internalValue = value;\n  }\n  get value() {\n    return this.internalValue;\n  }\n  /**\n   * Update the current value.\n   *\n   * If producer is active (i.e. someone is listening), this emits an event.\n   * If not, just the current value is updated.\n   */\n  update(value) {\n    this.internalValue = value;\n    if (this.listener) {\n      this.listener.next(value);\n    }\n  }\n  /**\n   * Produce an error\n   */\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  error(error) {\n    if (this.listener) {\n      this.listener.error(error);\n    }\n  }\n  /**\n   * Called by the stream. Do not call this directly.\n   */\n  start(listener) {\n    this.listener = listener;\n    listener.next(this.internalValue);\n    if (this.callbacks) {\n      this.callbacks.onStarted();\n    }\n  }\n  /**\n   * Called by the stream. Do not call this directly.\n   */\n  stop() {\n    if (this.callbacks) {\n      this.callbacks.onStop();\n    }\n    this.listener = undefined;\n  }\n}\nexports.DefaultValueProducer = DefaultValueProducer;","map":{"version":3,"names":["DefaultValueProducer","constructor","value","callbacks","internalValue","update","listener","next","error","start","onStarted","stop","onStop","undefined","exports"],"sources":["../src/defaultvalueproducer.ts"],"sourcesContent":[null],"mappings":";;;;;;AAOA;AACA,MAAaA,oBAAoB;EAS/BC,YAAmBC,KAAQ,EAAEC,SAA0C;IACrE,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,aAAa,GAAGF,KAAK;EAC5B;EAXA,IAAWA,KAAKA,CAAA;IACd,OAAO,IAAI,CAACE,aAAa;EAC3B;EAWA;;;;;;EAMOC,MAAMA,CAACH,KAAQ;IACpB,IAAI,CAACE,aAAa,GAAGF,KAAK;IAC1B,IAAI,IAAI,CAACI,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACC,IAAI,CAACL,KAAK,CAAC;;EAE7B;EAEA;;;EAGA;EACOM,KAAKA,CAACA,KAAU;IACrB,IAAI,IAAI,CAACF,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACE,KAAK,CAACA,KAAK,CAAC;;EAE9B;EAEA;;;EAGOC,KAAKA,CAACH,QAAqB;IAChC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxBA,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACH,aAAa,CAAC;IAEjC,IAAI,IAAI,CAACD,SAAS,EAAE;MAClB,IAAI,CAACA,SAAS,CAACO,SAAS,EAAE;;EAE9B;EAEA;;;EAGOC,IAAIA,CAAA;IACT,IAAI,IAAI,CAACR,SAAS,EAAE;MAClB,IAAI,CAACA,SAAS,CAACS,MAAM,EAAE;;IAEzB,IAAI,CAACN,QAAQ,GAAGO,SAAS;EAC3B;;AAzDFC,OAAA,CAAAd,oBAAA,GAAAA,oBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}